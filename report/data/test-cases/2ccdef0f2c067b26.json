{"uid":"2ccdef0f2c067b26","name":"创建mysql8.0.27策略","fullName":"main.TestLinuxMysql5_5CDM#test_3_创建策略.yaml","historyId":"14a477d3f4a63296ac26bddac4aba2ac","time":{"start":1710122075100,"stop":1710122175355,"duration":100255},"description":"\n                在pytest中，默认情况下，使用request作为参数名称可以自动传递pytest.FixtureRequest对象\n            ","descriptionHtml":"<pre><code>            在pytest中，默认情况下，使用request作为参数名称可以自动传递pytest.FixtureRequest对象\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1710122074777,"stop":1710122074857,"duration":80},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"doctest_namespace","time":{"start":1710122074857,"stop":1710122074857,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"get_global_data","time":{"start":1710122075098,"stop":1710122075098,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"set_global_data","time":{"start":1710122075098,"stop":1710122075098,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"check_woker_id","time":{"start":1710122075098,"stop":1710122075098,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"\n                在pytest中，默认情况下，使用request作为参数名称可以自动传递pytest.FixtureRequest对象\n            ","status":"passed","steps":[{"name":"替换变量","time":{"start":1710122075100,"stop":1710122075190,"duration":90},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"data","value":"{'method': 'POST', 'url': '/api/admin.v1.ProtectionStrategy/Add', 'headers': {'Authorization': 'Bearer ${access_token}'}, 'json': {'backupKind': 1, 'datasets': [{'backupKind': 1, 'appKind': 2, 'protectedObjects': [{'targetId': '${application_id}', 'targetType': 1, 'lbletId': '${get_lblet_info(192.168.2.44, id)}'}], 'protectionCapacity': 10737418240}], 'poolID': 34, 'protocol': 1, 'protocolValue': '${get_lblet_info(192.168.2.44, iqn)}', 'sla': {'chain': '{\"keep\":1,\"goldenCopyLeastNumber\":7}'}, 'logPeriod': 0, 'password': '', 'applicationID': '${application_id}', 'name': 'my44', 'cronExpression': '* * * * ?', 'able': False}}"}],"hasContent":true,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"请求接口","time":{"start":1710122075190,"stop":1710122075263,"duration":73},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"method","value":"'POST'"},{"name":"url","value":"'/api/admin.v1.ProtectionStrategy/Add'"},{"name":"headers","value":"{'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjU1NiwiZXhwIjoxNzEwMTY1MjY4LCJpYXQiOjE3MTAxMjIwNjgsImlzcyI6ImNvbS5ob3dsaW5rLmNkbS5hZG1pbiJ9.8eGq9E3WHT73naitnwDuE_IRtZB87mqW4v8r9I2z-RE'}"},{"name":"json","value":"{'able': False, 'applicationID': 1588, 'backupKind': 1, 'cronExpression': '* * * * ?', 'datasets': [{'appKind': 2, 'backupKind': 1, 'protectedObjects': [{'lbletId': 94, 'targetId': 1588, 'targetType': 1}], 'protectionCapacity': 10737418240}], 'logPeriod': 0, 'name': 'my44', 'password': '', 'poolID': 34, 'protocol': 1, 'protocolValue': 'iqn.1994-05.com.redhat:b96dac1633f0', 'sla': {'chain': '{\"keep\":1,\"goldenCopyLeastNumber\":7}'}}"}],"hasContent":true,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"提取变量","time":{"start":1710122075263,"stop":1710122075264,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"var_name","value":"'code'"},{"name":"attr","value":"'status_code'"},{"name":"expr","value":"'(.*)'"},{"name":"index","value":"0"}],"hasContent":true,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"提取变量","time":{"start":1710122075264,"stop":1710122075265,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"var_name","value":"'create_strategy_event_id'"},{"name":"attr","value":"'json'"},{"name":"expr","value":"'$.data'"},{"name":"index","value":"0"}],"hasContent":true,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"替换变量","time":{"start":1710122075265,"stop":1710122075266,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"data","value":"{'equals': {'状态码断言': [200, '${code}']}}"}],"hasContent":true,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"断言","time":{"start":1710122075266,"stop":1710122075266,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"317d8d678dc77494","name":"log","source":"317d8d678dc77494.txt","type":"text/plain","size":4390}],"parameters":[],"hasContent":true,"stepsCount":6,"shouldDisplayMessage":false,"attachmentsCount":1},"afterStages":[{"name":"set_global_data::0","time":{"start":1710122175356,"stop":1710122175356,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"get_global_data::0","time":{"start":1710122175358,"stop":1710122175358,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"epic","value":"项目名称：CDM"},{"name":"feature","value":"mysqlCDM备份恢复"},{"name":"story","value":"默认story"},{"name":"suite","value":"main"},{"name":"subSuite","value":"TestLinuxMysql5_5CDM"},{"name":"host","value":"xukai"},{"name":"thread","value":"29684-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"main"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case_info","value":"CaseInfo(title='创建mysql8.0.27策略', request={'method': 'POST', 'url': '/api/admin.v1.ProtectionStrategy/Add', 'headers': {'Authorization': 'Bearer ${access_token}'}, 'json': {'backupKind': 1, 'datasets': [{'backupKind': 1, 'appKind': 2, 'protectedObjects': [{'targetId': '${application_id}', 'targetType': 1, 'lbletId': '${get_lblet_info(192.168.2.44, id)}'}], 'protectionCapacity': 10737418240}], 'poolID': 34, 'protocol': 1, 'protocolValue': '${get_lblet_info(192.168.2.44, iqn)}', 'sla': {'chain': '{\"keep\":1,\"goldenCopyLeastNumber\":7}'}, 'logPeriod': 0, 'password': '', 'applicationID': '${application_id}', 'name': 'my44', 'cronExpression': '* * * * ?', 'able': False}}, extract={'code': ['status_code', '(.*)', 0], 'create_strategy_event_id': ['json', '$.data', 0]}, validate={'equals': {'状态码断言': [200, '${code}']}}, fixture_code='', parametrize='', epic='项目名称：CDM', feature='mysqlCDM备份恢复', story='默认story', is_run='', post_function='check_create_ok')"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"2ccdef0f2c067b26.json","parameterValues":["CaseInfo(title='创建mysql8.0.27策略', request={'method': 'POST', 'url': '/api/admin.v1.ProtectionStrategy/Add', 'headers': {'Authorization': 'Bearer ${access_token}'}, 'json': {'backupKind': 1, 'datasets': [{'backupKind': 1, 'appKind': 2, 'protectedObjects': [{'targetId': '${application_id}', 'targetType': 1, 'lbletId': '${get_lblet_info(192.168.2.44, id)}'}], 'protectionCapacity': 10737418240}], 'poolID': 34, 'protocol': 1, 'protocolValue': '${get_lblet_info(192.168.2.44, iqn)}', 'sla': {'chain': '{\"keep\":1,\"goldenCopyLeastNumber\":7}'}, 'logPeriod': 0, 'password': '', 'applicationID': '${application_id}', 'name': 'my44', 'cronExpression': '* * * * ?', 'able': False}}, extract={'code': ['status_code', '(.*)', 0], 'create_strategy_event_id': ['json', '$.data', 0]}, validate={'equals': {'状态码断言': [200, '${code}']}}, fixture_code='', parametrize='', epic='项目名称：CDM', feature='mysqlCDM备份恢复', story='默认story', is_run='', post_function='check_create_ok')"]}